# Dimension

A **dimension** is an equivalence class generated by the commensurability relation. It represents the fundamental nature of a physical quantity, independent of its units or scale.

## The 7 Base Dimensions

UCUM uses seven base dimensions corresponding to the seven base units:

1. **L** - Length (meter)
2. **M** - Mass (gram)
3. **T** - Time (second)
4. **A** - Plane angle (radian)
5. **Θ** - Temperature (kelvin)
6. **Q** - Electric charge (coulomb)
7. **F** - Luminous intensity (candela)

> **Note**: UCUM differs from SI by using gram instead of kilogram, and including radian as a base unit rather than treating it as dimensionless.

## Dimension Representation

Every unit can be represented as a pair (r, d) where:
- **r** = magnitude (numeric conversion factor)
- **d** = dimension object containing only non-zero exponents for base dimensions

### Examples:
- `m` = `{L: 1}` = L¹
- `N` = `{L: 1, M: 1, T: -2}` = L¹·M¹·T⁻²
- `J` = `{L: 2, M: 1, T: -2}` = L²·M¹·T⁻²
- `W` = `{L: 2, M: 1, T: -3}` = L²·M¹·T⁻³
- `Hz` = `{T: -1}` = T⁻¹
- `Pa` = `{L: -1, M: 1, T: -2}` = L⁻¹·M¹·T⁻²

### Common Derived Dimensions:
- Velocity: `{L: 1, T: -1}` = LT⁻¹
- Force: `{M: 1, L: 1, T: -2}` = MLT⁻²
- Energy: `{M: 1, L: 2, T: -2}` = ML²T⁻²
- Pressure: `{M: 1, L: -1, T: -2}` = ML⁻¹T⁻²
- Volume: `{L: 3}` = L³
- Frequency: `{T: -1}` = T⁻¹
- Electric current: `{Q: 1, T: -1}` = QT⁻¹

## Dimension Algebra

### Operations on Dimensions:
- **Multiplication**: Add corresponding exponents
  - `m × m = m²` → `{L: 1} + {L: 1} = {L: 2}`
  - `kg × m/s² = N` → `{M: 1} + {L: 1, T: -2} = {M: 1, L: 1, T: -2}`
- **Division**: Subtract corresponding exponents
  - `m / s = m/s` → `{L: 1} - {T: 1} = {L: 1, T: -1}`
  - `J / s = W` → `{M: 1, L: 2, T: -2} - {T: 1} = {M: 1, L: 2, T: -3}`
- **Exponentiation**: Multiply all exponents by the power
  - `m³` → `{L: 1} × 3 = {L: 3}`
  - `(m/s)²` → `{L: 1, T: -1} × 2 = {L: 2, T: -2}`

## Commensurability

Units are **commensurable** (convertible) if and only if they have the same dimension:
- `m` and `ft` both = `{L: 1}` ✓ (convertible)
- `km/h` and `m/s` both = `{L: 1, T: -1}` ✓ (convertible)
- `m` and `kg` have different dimensions (`{L: 1}` vs `{M: 1}`) ✗ (not convertible)

## Special Cases

### Dimensionless Units
- Units like percent, parts per million, and ratios
- Have empty dimension object `{}` (no dimensions)
- All dimensionless units are commensurable with each other
- Examples: `%`, `ppb`, `[ppth]`, `1` (the unit one)

### Special Units
- Units on non-ratio scales (e.g., Celsius, pH)
- Have dimensions but require special conversion functions
- Cannot participate in algebraic operations
- See [special-units.md](./special-units.md) for details

### Arbitrary Units
- Have no specific dimension
- Not commensurable with any other unit
- Cannot be converted (e.g., enzyme activity units)

## Implementation Notes

- Most practical units use exponents from -4 to +4
- Object representation is more memory efficient than vectors (only stores non-zero dimensions)
- TypeScript type: `type DimensionObject = { L?: number; T?: number; M?: number; A?: number; Θ?: number; Q?: number; F?: number; }`
- Empty object `{}` represents dimensionless units

### Example Implementation:
```typescript
// Add dimensions (multiplication)
function addDimensions(d1: DimensionObject, d2: DimensionObject): DimensionObject {
  const result: DimensionObject = { ...d1 };
  for (const [key, value] of Object.entries(d2)) {
    result[key] = (result[key] || 0) + value;
    if (result[key] === 0) delete result[key];
  }
  return result;
}

// Check commensurability
function areCommensurable(d1: DimensionObject, d2: DimensionObject): boolean {
  const keys = new Set([...Object.keys(d1), ...Object.keys(d2)]);
  for (const key of keys) {
    if ((d1[key] || 0) !== (d2[key] || 0)) return false;
  }
  return true;
}
```

**Key insight**: The dimension system forms the mathematical foundation that enables UCUM to determine unit compatibility, perform conversions, and maintain semantic consistency across the entire unit system.